事务的四大特性是指 ACID 特性，即原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）和持久性（Durability）。这些特性确保数据库操作的正确性和可靠性。以下是每个特性的详细解释及示例：

### 1   原子性（Atomicity）
原子性意味着事务是一个不可分割的操作单元，要么全部成功，要么全部失败。如果事务中的某一步操作失败，那么整个事务的所有操作都会回滚，恢复到事务开始之前的状态。

>   【示例】假设你在银行账户 A 向账户 B 转账 100 元。这个事务包含两个步骤：
>
>   1. 从账户 A 中扣除 100 元。
>   2. 将 100 元添加到账户 B 中。
>
>   如果在第一步成功后，第二步失败（比如因为网络问题），那么事务会回滚，A 账户扣除的 100 元将被恢复，以确保不会出现 A 被扣款但 B 没收到钱的情况。
>

### 2   一致性（Consistency）
一致性指的是事务执行之前和之后，数据库都必须保持一致的状态。事务的执行不能破坏数据库中的任何约束（如主键约束、外键约束等）。

>   【示例】假设在一张产品库存表中，每个产品的库存数量必须为非负数。如果一个事务尝试将某个产品的库存减少到负数（如 -5），数据库会拒绝这个事务，从而保持数据的一致性。

### 3   隔离性（Isolation）

隔离性指的是多个事务同时执行时，它们之间不会互相干扰。==每个事务的中间状态对其他事务不可见，只有当事务提交后，其他事务才能看到结果。==

>   【示例】假设两个人同时查询和更新某个库存数量。如果没有隔离性，那么一个事务更新了库存数量，但另一个事务可能会读取到旧的或不完整的数据。隔离性确保两个事务之间不会出现这样的冲突。

### 4   持久性（Durability）

持久性指的是事务一旦提交，数据库的改变就会永久保留，即使系统发生故障（如宕机或断电），数据也不会丢失。

>   【示例】假设你在网上银行转账成功后，突然系统断电。如果事务已经提交，那么银行系统在重启后，账户间的转账记录会依然存在，并且不会因为断电而丢失数据。

### 总结：

- **原子性**确保事务是“要么全部成功，要么全不执行”。
- **一致性**保证数据库遵守约束，避免数据不一致的情况。
- **隔离性**让并发事务互不干扰。
- **持久性**确保事务的结果在提交后永久保留。

这些特性确保数据库在并发、故障等情况下依然保持稳定和可靠。