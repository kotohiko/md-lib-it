# 第 1 章   了解 Web 及网络基础



## 1.1   使用 HTTP 协议访问 Web

本节简单介绍了下通过 HTTP 访问 Web 资源的过程及其相关的基本概念名称。



## 1.2   HTTP 的诞生

本节简述了 HTTP 的发展历史。

### 1.2.3   驻足不前的 HTTP

#### HTTP/1.1

1997 年 1 月公布的 HTTP/1.1 仍然是目前主流的 HTTP 协议版本。

## 1.3   网络基础 TCP/IP

我们通常使用的网络都是建立在 TCP/IP 协议族的基础上运作的。HTTP 属于它内部的一个子集。

### 1.3.1   TCP/IP 协议族

计算机要与网络设备之间通信，就必须基于相同的方法。不同的硬件、OS 之间的通信，所有的这一切都需要一种规则，我们称这种规则为**协议（protocol）**。

### 1.3.2   TCP/IP 的分层管理

分层有两大好处：一、降低维护成本；二、降低设计难度。

#### 应用层

**应用层（application layer）**决定了向用户提供应用服务时的通信的活动。

#### 传输层



#### 网络层（又名网络互连层）



#### 链路层（又名数据链路层、网络接口层）



## 1.4   与 HTTP 关系密切的协议：IP、TCP 和 DNS

### 1.4.1   负责传输的 IP 协议

#### 使用 ARP 协议凭借 MAC 地址进行通信



#### 没有人能够全面掌握互联网中的传输状况



### 1.4.2   确保可靠性的 TCP 协议

TCP 位于传输层，提供「可靠」的字节流服务。

所谓**字节流服务（byte stream service）**指的是，为了方便传输，将大块数据分割成以**报文段（segment）**为单位的数据包进行管理。可靠的传输服务是指，能够把数据准确可靠地传给对方。

一言以蔽之，TCP 协议为了更容易传送大数据才把数据分割，而且 TCP 协议能够确认数据最终是否传送给对方。

#### 确保数据能到达目标——三次握手

为了准确无误地将数据送达目标处，TCP 协议采用了**三次握手（three-way handshaking）**策略。

用 TCP 协议将数据包送出去后，TCP 不会对传送后的情况置之不理，它「一定」会向对方确认是否成功送达。握手过程中使用了 TCP 的标志（flag）——**SYN（synchronize）**和 **ACK（acknowledgement）**。

1.  发送端首先会发送一个带 SYN 标志的数据包给对方。
2.  接收端收到后，回传一个带有 SYN/ACK 标志的数据包以示传达确认信息。
3.  最后，发送端再回传一个带 ACK 标志的数据包，代表「握手」结束。

若在握手过程中某个阶段莫名中断，TCP 协议会再次以相同顺序发送相同的数据包。

## 1.5   负责域名解析的 DNS 服务



## 1.7   URI 和 URL



# 第 2 章   简单的 HTTP 协议



## 2.1   HTTP 协议用于客户端和服务器端之间的通信

HTTP 和 TCP/IP 协议族内的其他众多协议相同，用于客户端和服务器之间的通信。应用 HTTP 协议时，「必定」是一端担任客户端角色，另一端担任服务器端角色。



## 2.2   通过请求和响应的交换达成通信

下面给出从客户端发送给某个 HTTP 服务器端的请求报文中的内容。

```http
GET /index.html HTTP/1.1
Host: ***.***.com
```





## 2.3   HTTP 是不保存状态的协议

HTTP 是一种不保存状态，即**无状态（stateless）**协议。

设计得这么简单是特意的，目的是为了更快地处理大量事务，确保协议的可伸缩性。

但是，以我们今天使用 Web 的体验来看，似乎 Web 很清楚我们的行动轨迹，原因很简单——虽说 HTTP/1.1 是无状态协议，但是为了实现提高用户体验，引入了 Cookie 技术。

## 2.5   告知服务器意图的 HTTP 方法





# 第 4 章   返回结果的 HTTP 状态码



# 第 6 章   HTTP 首部



## 6.1   HTTP 报文首部

















# 第 7 章   确保 Web 安全的 HTTPS



## 7.1   HTTP 的缺点

HTTP 主要的不足如下：

-   通信使用不加密明文，内容可能会被窃听
-   不验证通信方的身份，因此有可能遭遇伪装
-   无法证明报文的完整性，所以有可能已经被篡改

这些问题不是 HTTP 特有的，其他未加密的协议中也会存在这类问题。

### 7.1.1   通信使用明文可能会被窃听